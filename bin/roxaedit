#!/bin/bash
Author="Valéry Bruniaux - Lycée Arthur Rimbaud"
Title=`echo $1 | cut -f1 -d'.'`
PageSize="A4"
PageOrientation="Portrait"
TopMargin="0.75cm"
BottomMargin="1cm"
LeftMargin="1cm"
RightMargin="1cm"
FooterFont="Bell MT"
FooterSize="8"
Style="$2"

echo "Fabrication de la page HTML $Title.htlm ..."
echo

pandoc $1 --from=markdown+emoji --to=html5 --template="$Style.template" -c "$Style.css" --number-sections --standalone --webtex="http://latex.codecogs.com/svg.latex?" -o "$Title".html

echo "On retire les lien https pour wkhtmltopdf ..."
echo

sed -i 's/https/http/g' "$Title".html

echo "Fabrication du ficher PDF $Title.pdf ..."
echo

wkhtmltopdf --encoding 'utf-8' --print-media-type --footer-line --footer-spacing 2 --footer-font-name "$FooterFont" --footer-font-size "$FooterSize" --footer-left "$Author" --footer-right "[page] / [topage]" --margin-top "$TopMargin" --margin-left "$LeftMargin" --margin-right "$RightMargin" --margin-bottom "$BottomMargin" -O "$PageOrientation" -s "$PageSize" --javascript-delay 500 "$Title".html "$Title".pdf

